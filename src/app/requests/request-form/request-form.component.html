<div class="p-4 request-details" style="max-height:90vh;overflow:auto" *ngIf="request" appPerfectScrollbar>
  <mat-toolbar class="alt">
    <mat-toolbar-row class="alt">
      <a routerLink="/requests" class="primary-link">Requests</a>&nbsp;> {{request.id}}
    </mat-toolbar-row>
  </mat-toolbar>
  <mat-divider></mat-divider>
  <div class="request-form" fxLayout="column" fxLayoutGap="24px">
    <mat-toolbar class="project-info-row">
      <mat-toolbar-row>
        <div class="project-column" fxFlex fxLayout="column" fxLayoutAlign="center start">
          <label class="project-label" fxFlex>REQUEST ID</label>
          <div fxFlex>{{request.id}}</div>
        </div>
        <div class="project-column" fxFlex fxLayout="column" fxLayoutAlign="center start">
          <label class="project-label" fxFlex>PROJECT ID</label>
          <div fxFlex>{{selectedProject.id}}</div>
        </div>
        <div class="project-column" fxFlex fxLayout="column" fxLayoutAlign="center start">
          <label class="project-label" fxFlex>PROJECT OWNER</label>
          <div fxFlex>{{selectedProject.owner}}</div>
        </div>
        <div class="project-column" fxFlex fxLayout="column" fxLayoutAlign="center start">
          <label class="project-label" fxFlex>WORK COMPLETED PERIOD</label>
          <div fxFlex>{{request.startDate | date:'shortDate'}} - {{request.endDate | date:'shortDate'}}</div>
        </div>
        <div class="project-column" fxFlex fxLayout="column" fxLayoutAlign="center start">
          <label class="project-label" fxFlex>PROJECT</label>
          <div fxFlex>{{selectedProject.name}}</div>
        </div>
        <div class="project-column" fxFlex fxLayout="column" fxLayoutAlign="center start">
          <label class="project-label" fxFlex>REQUEST TYPE</label>
          <div fxFlex>{{request.type}}</div>
        </div>
      </mat-toolbar-row>
    </mat-toolbar>
    <mat-toolbar class="mat-toolbar-white">
      <mat-toolbar-row fxLayout="row" fxLayoutGap="8px">
        <div fxLayout="column" fxLayoutGap="8px">
          <button mat-raised-button color="primary">Approval All</button>
          <button *ngIf="request && request.disputes && request.disputes.length > 0" mat-raised-button color="accent">Send {{request.disputes.length}} Disputes</button>
        </div>
        <div fxLayout="row" fxFlex class="cost-row p-8" fxLayoutAlign="start stretch">
          <div class="cost-column" fxFlex fxLayout="column" fxLayoutAlign="center start">
            <label class="cost-label" fxFlex>EQUIPMENT COSTS</label>
            <div fxFlex>{{19459 | currency}}</div>
          </div>
          <div class="cost-column" fxFlex fxLayout="column" fxLayoutAlign="center start">
            <label class="cost-label" fxFlex>LABOR COSTS</label>
            <div fxFlex>{{4236 | currency}}</div>
          </div>
          <div class="cost-column" fxFlex fxLayout="column" fxLayoutAlign="center start">
            <label class="cost-label" fxFlex>MATERIAL COSTS</label>
            <div fxFlex>{{15216 | currency}}</div>
          </div>
          <div class="cost-column" fxFlex fxLayout="column" fxLayoutAlign="center start">
            <label class="cost-label" fxFlex>OTHER COSTS</label>
            <div fxFlex>{{345 | currency}}</div>
          </div>
          <div class="cost-column" fxFlex fxLayout="column" fxLayoutAlign="center start">
            <label class="cost-label" fxFlex>SUBCONTRACTOR COSTS</label>
            <div fxFlex>{{38911 | currency}}</div>
          </div>
          <div class="total-cost-column" fxFlex fxLayout="column" fxLayoutAlign="center start">
            <label class="cost-label" fxFlex>TOTAL COSTS</label>
            <div fxFlex>{{38911 | currency}}</div>
          </div>
        </div>
      </mat-toolbar-row>
    </mat-toolbar>
    <div class="p-4 m-0" fxLayout="column" fxLayoutGap="14px">
      <div fxLayout="row" fxLayoutGap="14px" fxLayoutAlign="start center">
        <label>Filter</label>

        <mat-checkbox (change)="toggleCheckbox('all',$event)">All</mat-checkbox>
        <mat-checkbox color="warn" (change)="toggleCheckbox('concerns',$event)">Concerns</mat-checkbox>
        <mat-checkbox color="accent" (change)="toggleCheckbox('no',$event)">No Concerns</mat-checkbox>
      </div>

    </div>
    <div *ngIf="request.costs.equipmentCosts.enabled" class="p-8 full-width" fxLayout="column" fxLayoutGap="4px">
      <div *ngIf="request.costs.equipmentCosts.activeCosts.costs.length > 0" class="full-width" fxLayout="column" fxLayoutGap="4px">
        <div class="smaller-gray-text" fxLayout="row" fxLayoutGap="4px">
          <label>Equipment |
            <b>Active Use</b>
          </label>
          <span class="spacer"></span>
          <span class="spacer"></span>
          <span class="spacer"></span>

          <span fxFlex class="right-align subtitle">powered by
            <img class="img-responsive" src="../../assets/img/ew-small.gif">
          </span>
        </div>
        <mat-accordion displayMode="flat" multi class="mat-table cost-table">
          <section matSort class="mat-header-row" fxLayout="row" fxLayoutAlign="start center">
            <div class="mat-header-cell">MAKE/MODEL</div>
            <span class="mat-header-cell">DESCRIPTION</span>
            <span class="mat-header-cell">YEAR</span>
            <span class="mat-header-cell">SN/VIN</span>
            <span class="mat-header-cell">OWNERSHIP</span>
            <span class="mat-header-cell">OPERATING</span>
            <span class="mat-header-cell">FHWA</span>
            <span class="mat-header-cell">HOURS</span>
            <span class="mat-header-cell">TRANSPORT</span>
            <span class="mat-header-cell">AMOUNT</span>
          </section>
          <mat-expansion-panel *ngFor="let item of request.costs.equipmentCosts.activeCosts.costs">
            <mat-expansion-panel-header class="mat-row">
              <span class="mat-cell ts-80">{{item.machine.make}}</span>
              <span class="mat-cell ts-80">{{item.machine.description | truncate: 12}}</span>
              <span class="mat-cell ts-80">{{item.machine.year}}</span>
              <span class="mat-cell ts-80">{{item.machine.vin}}</span>
              <span class="mat-cell ts-80">{{item.machine.ownershipCost | currency}}</span>
              <span class="mat-cell ts-80">{{item.machine.operatingCost | currency}}</span>
              <span class="mat-cell ts-80">{{item.machine.fhwa | currency}}</span>
              <span class="mat-cell ts-80">{{item.hours}}</span>
              <span class="mat-cell ts-80">{{item.transportationCost | currency}}</span>
              <span class="mat-cell ts-80">{{item.total | currency}}</span>

            </mat-expansion-panel-header>
            <div fxLayout="row" fxLayoutGap="8px">
              <button mat-raised-button (click)="approveActive(item)">Approve</button>
              <button mat-button (click)="disputeActive(item)">Add Dispute</button>
            </div>
            <div class="m-t-12 full-width" *ngIf="item.disputes && item.disputes.length > 0" fxLayout="column" fxLayoutGap="10px">
              <ngx-datatable #myActiveTable class="material" [rowHeight]="'auto'" [headerHeight]="50" [limit]="10" [columnMode]="'force'" [footerHeight]="50"
                [rows]="item.disputes">
                <ngx-datatable-column name="DISPUTE TYPE" prop="type">
                  <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-value="value" let-row="row">
                    <mat-form-field>
                      <mat-select placeholder="Dispute Type" [ngModelOptions]="{standalone: true}" [(ngModel)]="row.type">
                        <mat-option *ngFor="let t of disputeTypes" [value]="t.value">
                          {{ t.viewValue }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                  </ng-template>
                </ngx-datatable-column>
                <ngx-datatable-column name="ISSUE" prop="issue">
                  <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-row="row" let-value="value">
                    <mat-form-field>
                      <mat-select placeholder="Issue" [ngModelOptions]="{standalone: true}" [(ngModel)]="row.issue">
                        <mat-option *ngFor="let t of issues" [value]="t.value">
                          {{ t.viewValue }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                  </ng-template>
                </ngx-datatable-column>
                <ngx-datatable-column name="DISPUTE REQUEST" prop="disputeRequest">
                  <ng-template ngx-datatable-cell-template let-row="row" let-value="value">
                    <mat-form-field>
                      <mat-select placeholder="Dispute Request" [ngModelOptions]="{standalone: true}" [(ngModel)]="row.disputeRequest">
                        <mat-option *ngFor="let t of requestDisputes" [value]="t.value">
                          {{ t.viewValue }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                  </ng-template>
                </ngx-datatable-column>
                <ngx-datatable-column name="AMOUNT" prop="amount">
                  <ng-template ngx-datatable-cell-template let-row="row" let-value="value">
                    <input matInput currencyMask [ngModelOptions]="{standalone: true}" [(ngModel)]="row.amount">
                  </ng-template>
                </ngx-datatable-column>
                <ngx-datatable-column name="COMMENT" prop="comment">
                  <ng-template ngx-datatable-cell-template let-row="row" let-value="value">
                    <input matInput [ngModelOptions]="{standalone: true}" [(ngModel)]="row.comment">
                  </ng-template>
                </ngx-datatable-column>
              </ngx-datatable>
            </div>
          </mat-expansion-panel>

        </mat-accordion>
      </div>
      <div style="padding-top:10px"></div>
      <div *ngIf="request.costs.equipmentCosts.standbyCosts.costs.length > 0" class="full-width" fxLayout="column" fxLayoutGap="4px">
        <div class="smaller-gray-text" fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="4px">
          <label>Equipment |
            <b>Standby</b>
          </label>
          <span class="spacer"></span>
          <span class="spacer"></span>
          <span class="spacer"></span>

          <span fxFlex class="right-align subtitle">powered by
            <img class="img-responsive" src="../../assets/img/ew-small.gif">
          </span>
        </div>
        <mat-accordion displayMode="flat" multi class="mat-table cost-table">
          <section matSort class="mat-header-row">
            <span class="mat-header-cell">MAKE/MODEL</span>
            <span class="mat-header-cell">DESCRIPTION</span>
            <span class="mat-header-cell">YEAR</span>
            <span class="mat-header-cell">SN/VIN</span>
            <span class="mat-header-cell">OWNERSHIP</span>
            <span class="mat-header-cell">OPERATING</span>
            <span class="mat-header-cell">FHWA</span>
            <span class="mat-header-cell">HOURS</span>
            <span class="mat-header-cell">TRANSPORT</span>
            <span class="mat-header-cell">AMOUNT</span>
          </section>
          <mat-expansion-panel *ngFor="let item of request.costs.equipmentCosts.standbyCosts.costs">
            <mat-expansion-panel-header class="mat-row">
              <span class="mat-cell ts-80">{{item.machine.make}}</span>
              <span class="mat-cell ts-80">{{item.machine.description | truncate: 12}}</span>
              <span class="mat-cell ts-80">{{item.machine.year}}</span>
              <span class="mat-cell ts-80">{{item.machine.vin}}</span>
              <span class="mat-cell ts-80">{{item.machine.ownershipCost | currency}}</span>
              <span class="mat-cell ts-80">{{item.machine.operatingCost | currency}}</span>
              <span class="mat-cell ts-80">{{item.machine.fhwa | currency}}</span>
              <span class="mat-cell ts-80">{{item.hours}}</span>
              <span class="mat-cell ts-80">{{item.transportationCost | currency}}</span>
              <span class="mat-cell ts-80">{{item.total | currency}}</span>

            </mat-expansion-panel-header>
            <div fxLayout="row" fxLayoutGap="8px">
              <button mat-raised-button (click)="approveStandby(item)">Approve</button>
              <button mat-button (click)="disputeStandby(item)">Add Dispute</button>
            </div>
            <div class="m-t-12 full-width" *ngIf="item.disputes && item.disputes.length > 0" fxLayout="column" fxLayoutGap="10px">
              <ngx-datatable #mystandbytable class="material" [headerHeight]="50" [limit]="10" [columnMode]="'force'" [footerHeight]="50"
                [rowHeight]="'auto'" [rows]="item.disputes">
                <ngx-datatable-column name="DISPUTE TYPE" prop="type">
                  <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-value="value" let-row="row">
                    <mat-form-field>
                      <mat-select placeholder="Dispute Type" [ngModelOptions]="{standalone: true}" [(ngModel)]="row.type">
                        <mat-option *ngFor="let t of disputeTypes" [value]="t.value">
                          {{ t.viewValue }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                  </ng-template>
                </ngx-datatable-column>
                <ngx-datatable-column name="ISSUE" prop="issue">
                  <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-row="row" let-value="value">
                    <mat-form-field>
                      <mat-select placeholder="Issue" [ngModelOptions]="{standalone: true}" [(ngModel)]="row.issue">
                        <mat-option *ngFor="let t of issues" [value]="t.value">
                          {{ t.viewValue }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                  </ng-template>
                </ngx-datatable-column>
                <ngx-datatable-column name="DISPUTE REQUEST" prop="disputeRequest">
                  <ng-template ngx-datatable-cell-template let-row="row" let-value="value">
                    <mat-form-field>
                      <mat-select placeholder="Dispute Request" [ngModelOptions]="{standalone: true}" [(ngModel)]="row.disputeRequest">
                        <mat-option *ngFor="let t of requestDisputes" [value]="t.value">
                          {{ t.viewValue }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                  </ng-template>
                </ngx-datatable-column>
                <ngx-datatable-column name="AMOUNT" prop="amount">
                  <ng-template ngx-datatable-cell-template let-row="row" let-value="value">
                    <input matInput currencyMask [ngModelOptions]="{standalone: true}" [(ngModel)]="row.amount" [options]="{ align: 'left'}">
                  </ng-template>
                </ngx-datatable-column>
                <ngx-datatable-column name="COMMENT" prop="comment">
                  <ng-template ngx-datatable-cell-template let-row="row" let-value="value">
                    <input matInput [ngModelOptions]="{standalone: true}" [(ngModel)]="row.comment">
                  </ng-template>
                </ngx-datatable-column>
              </ngx-datatable>
            </div>
          </mat-expansion-panel>

        </mat-accordion>
      </div>
      <div style="padding-top:10px"></div>
      <div *ngIf="request.costs.equipmentCosts.rentalCosts.costs.length > 0" class="full-width" fxLayout="column" fxLayoutGap="4px">
        <div class="smaller-gray-text" fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="4px">
          <label>Equipment |
            <b>Rental</b>
          </label>
          <span class="spacer"></span>
          <span class="spacer"></span>
          <span class="spacer"></span>

          <span fxFlex class="right-align subtitle">powered by
            <img class="img-responsive" src="../../assets/img/ew-small.gif">
          </span>
        </div>
        <mat-accordion displayMode="flat" multi class="mat-table cost-table">
          <section matSort class="mat-header-row">
            <span class="mat-header-cell">DESCRIPTION</span>
            <span class="mat-header-cell">TYPE</span>
            <span class="mat-header-cell">BASE RENTAL</span>
            <span class="mat-header-cell">TRANSPORT</span>
            <span class="mat-header-cell">OTHER</span>
            <span class="mat-header-cell">INVOICE</span>
            <span class="mat-header-cell">TOTAL</span>
          </section>
          <mat-expansion-panel *ngFor="let item of request.costs.equipmentCosts.rentalCosts.costs">
            <mat-expansion-panel-header class="mat-row">
              <span class="mat-cell ts-80">{{item.description | truncate: 12}}</span>
              <span class="mat-cell ts-80">{{item.machine.description | truncate: 12}}</span>
              <span class="mat-cell ts-80">{{item.machine.baseRental}}</span>
              <span class="mat-cell ts-80">{{item.transportationCost | currency}}</span>
              <span class="mat-cell ts-80">{{item.other | currency}}</span>
              <span class="mat-cell ts-80">
                <a class="blue-link" *ngIf="item.invoice">invoice</a>
                <a class="blue-link" *ngIf="!item.invoice">Add Invoice</a>
              </span>
              <span class="mat-cell ts-80">{{item.total | currency}}</span>

            </mat-expansion-panel-header>
            <div fxLayout="row" fxLayoutGap="8px">
              <button mat-raised-button (click)="approveRental(item)">Approve</button>
              <button mat-button (click)="disputeRental(item)">Add Dispute</button>
            </div>
            <div class="m-t-12 full-width" *ngIf="item.disputes && item.disputes.length > 0" fxLayout="column" fxLayoutGap="10px">
              <ngx-datatable #myrentaltable class="material" [headerHeight]="50" [limit]="10" [columnMode]="'force'" [footerHeight]="50"
                [rowHeight]="'auto'" [rows]="item.disputes">
                <ngx-datatable-column name="DISPUTE TYPE" prop="type">
                  <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-value="value" let-row="row">
                    <mat-form-field>
                      <mat-select placeholder="Dispute Type" [ngModelOptions]="{standalone: true}" [(ngModel)]="row.type">
                        <mat-option *ngFor="let t of disputeTypes" [value]="t.value">
                          {{ t.viewValue }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                  </ng-template>
                </ngx-datatable-column>
                <ngx-datatable-column name="ISSUE" prop="issue">
                  <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-row="row" let-value="value">
                    <mat-form-field>
                      <mat-select placeholder="Issue" [ngModelOptions]="{standalone: true}" [(ngModel)]="row.issue">
                        <mat-option *ngFor="let t of issues" [value]="t.value">
                          {{ t.viewValue }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                  </ng-template>
                </ngx-datatable-column>
                <ngx-datatable-column name="DISPUTE REQUEST" prop="disputeRequest">
                  <ng-template ngx-datatable-cell-template let-row="row" let-value="value">
                    <mat-form-field>
                      <mat-select placeholder="Dispute Request" [ngModelOptions]="{standalone: true}" [(ngModel)]="row.disputeRequest">
                        <mat-option *ngFor="let t of requestDisputes" [value]="t.value">
                          {{ t.viewValue }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                  </ng-template>
                </ngx-datatable-column>
                <ngx-datatable-column name="AMOUNT" prop="amount">
                  <ng-template ngx-datatable-cell-template let-row="row" let-value="value">
                    <input matInput currencyMask [options]="{ align: 'left'}" [ngModelOptions]="{standalone: true}" [(ngModel)]="row.amount">
                  </ng-template>
                </ngx-datatable-column>
                <ngx-datatable-column name="COMMENT" prop="comment">
                  <ng-template ngx-datatable-cell-template let-row="row" let-value="value">
                    <input matInput [ngModelOptions]="{standalone: true}" [(ngModel)]="row.comment">
                  </ng-template>
                </ngx-datatable-column>
              </ngx-datatable>
            </div>
          </mat-expansion-panel>

        </mat-accordion>
      </div>
      <div style="padding-top:10px"></div>
      <div *ngIf="request.costs.materialCosts.costs.length > 0" class="full-width" fxLayout="column" fxLayoutGap="4px">
        <div class="smaller-gray-text" fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="4px">
          <label>Material
          </label>

        </div>
        <mat-accordion displayMode="flat" multi class="mat-table cost-table">
          <section matSort class="mat-header-row">
            <span class="mat-header-cell">DESCRIPTION</span>
            <span class="mat-header-cell">COST PER UNIT</span>
            <span class="mat-header-cell">QUANTITY</span>
            <span class="mat-header-cell">RECEIPT</span>
            <span class="mat-header-cell">SUBTOTAL</span>
            <span class="mat-header-cell">TOTAL</span>
          </section>
          <mat-expansion-panel *ngFor="let item of request.costs.materialCosts.costs">
            <mat-expansion-panel-header class="mat-row">
              <span class="mat-cell ts-80">{{item.description | truncate: 6}}</span>
              <span class="mat-cell ts-80">{{item.costPerUnit | currency}}</span>
              <span class="mat-cell ts-80">{{item.unitQuantity}}</span>
              <span class="mat-cell ts-80">
                <a class="blue-link" *ngIf="item.receipt">receipt</a>
                <a class="blue-link" *ngIf="!item.receipt">Add Receipt</a>
              </span>
              <span class="mat-cell ts-80">{{item.subtotal | currency}}</span>
              <span class="mat-cell ts-80">{{item.total | currency}}</span>

            </mat-expansion-panel-header>
            <div fxLayout="row" fxLayoutGap="8px">
              <button mat-raised-button (click)="approveMaterial(item)">Approve</button>
              <button mat-button (click)="disputeMaterial(item)">Add Dispute</button>
            </div>
            <div class="m-t-12 full-width" *ngIf="item.disputes && item.disputes.length > 0" fxLayout="column" fxLayoutGap="10px">
              <ngx-datatable #mymaterialtable class="material" [headerHeight]="50" [limit]="10" [columnMode]="'force'" [footerHeight]="50"
                [rowHeight]="'auto'" [rows]="item.disputes">
                <ngx-datatable-column name="DISPUTE TYPE" prop="type">
                  <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-value="value" let-row="row">
                    <mat-form-field>
                      <mat-select placeholder="Dispute Type" [ngModelOptions]="{standalone: true}" [(ngModel)]="row.type">
                        <mat-option *ngFor="let t of disputeTypes" [value]="t.value">
                          {{ t.viewValue }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                  </ng-template>
                </ngx-datatable-column>
                <ngx-datatable-column name="ISSUE" prop="issue">
                  <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-row="row" let-value="value">
                    <mat-form-field>
                      <mat-select placeholder="Issue" [ngModelOptions]="{standalone: true}" [(ngModel)]="row.issue">
                        <mat-option *ngFor="let t of issues" [value]="t.value">
                          {{ t.viewValue }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                  </ng-template>
                </ngx-datatable-column>
                <ngx-datatable-column name="DISPUTE REQUEST" prop="disputeRequest">
                  <ng-template ngx-datatable-cell-template let-row="row" let-value="value">
                    <mat-form-field>
                      <mat-select placeholder="Dispute Request" [ngModelOptions]="{standalone: true}" [(ngModel)]="row.disputeRequest">
                        <mat-option *ngFor="let t of requestDisputes" [value]="t.value">
                          {{ t.viewValue }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                  </ng-template>
                </ngx-datatable-column>
                <ngx-datatable-column name="AMOUNT" prop="amount">
                  <ng-template ngx-datatable-cell-template let-row="row" let-value="value">
                    <input matInput currencyMask [options]="{ align: 'left'}" [ngModelOptions]="{standalone: true}" [(ngModel)]="row.amount">
                  </ng-template>
                </ngx-datatable-column>
                <ngx-datatable-column name="COMMENT" prop="comment">
                  <ng-template ngx-datatable-cell-template let-row="row" let-value="value">
                    <input matInput [ngModelOptions]="{standalone: true}" [(ngModel)]="row.comment">
                  </ng-template>
                </ngx-datatable-column>
              </ngx-datatable>
            </div>
          </mat-expansion-panel>

        </mat-accordion>
      </div>
      <!-- <div style="padding-top:10px"></div>
      <div *ngIf="request.costs.laborCosts" class="full-width" fxLayout="column" fxLayoutGap="4px">
        <div class="smaller-gray-text" fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="4px">
          <label>Labor
          </label>

        </div>

      </div> -->
      <div style="padding-top:10px"></div>
      <div *ngIf="request.costs.otherCosts.costs.length > 0" class="full-width" fxLayout="column" fxLayoutGap="4px">
        <div class="smaller-gray-text" fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="4px">
          <label>Other
          </label>

        </div>
        <mat-accordion displayMode="flat" multi class="mat-table cost-table">
          <section matSort class="mat-header-row">
            <span class="mat-header-cell">TYPE</span>
            <span class="mat-header-cell">DESCRIPTION</span>
            <span class="mat-header-cell">RECEIPT</span>
            <span class="mat-header-cell">SUBTOTAL</span>
            <span class="mat-header-cell">TOTAL</span>
          </section>
          <mat-expansion-panel *ngFor="let item of request.costs.otherCosts.costs">
            <mat-expansion-panel-header class="mat-row">
              <span class="mat-cell ts-80">{{item.type}}</span>
              <span class="mat-cell ts-80">{{item.description | truncate:12}}</span>
              <span class="mat-cell ts-80">
                <a class="blue-link" *ngIf="item.receipt">receipt</a>
                <a class="blue-link" *ngIf="!item.receipt">Add Receipt</a>
              </span>
              <span class="mat-cell ts-80">{{item.subtotal | currency}}</span>
              <span class="mat-cell ts-80">{{item.total | currency}}</span>

            </mat-expansion-panel-header>
            <div fxLayout="row" fxLayoutGap="8px">
              <button mat-raised-button (click)="approveOther(item)">Approve</button>
              <button mat-button (click)="disputeOther(item)">Add Dispute</button>
            </div>
            <div class="m-t-12 full-width" *ngIf="item.disputes && item.disputes.length > 0" fxLayout="column" fxLayoutGap="10px">
              <ngx-datatable #myothertable class="material" [headerHeight]="50" [limit]="10" [columnMode]="'force'" [footerHeight]="50"
                [rowHeight]="'auto'" [rows]="item.disputes">
                <ngx-datatable-column name="DISPUTE TYPE" prop="type">
                  <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-value="value" let-row="row">
                    <mat-form-field>
                      <mat-select placeholder="Dispute Type" [ngModelOptions]="{standalone: true}" [(ngModel)]="row.type">
                        <mat-option *ngFor="let t of disputeTypes" [value]="t.value">
                          {{ t.viewValue }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                  </ng-template>
                </ngx-datatable-column>
                <ngx-datatable-column name="ISSUE" prop="issue">
                  <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-row="row" let-value="value">
                    <mat-form-field>
                      <mat-select placeholder="Issue" [ngModelOptions]="{standalone: true}" [(ngModel)]="row.issue">
                        <mat-option *ngFor="let t of issues" [value]="t.value">
                          {{ t.viewValue }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                  </ng-template>
                </ngx-datatable-column>
                <ngx-datatable-column name="DISPUTE REQUEST" prop="disputeRequest">
                  <ng-template ngx-datatable-cell-template let-row="row" let-value="value">
                    <mat-form-field>
                      <mat-select placeholder="Dispute Request" [ngModelOptions]="{standalone: true}" [(ngModel)]="row.disputeRequest">
                        <mat-option *ngFor="let t of requestDisputes" [value]="t.value">
                          {{ t.viewValue }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                  </ng-template>
                </ngx-datatable-column>
                <ngx-datatable-column name="AMOUNT" prop="amount">
                  <ng-template ngx-datatable-cell-template let-row="row" let-value="value">
                    <input matInput currencyMask [options]="{ align: 'left'}" [ngModelOptions]="{standalone: true}" [(ngModel)]="row.amount">
                  </ng-template>
                </ngx-datatable-column>
                <ngx-datatable-column name="COMMENT" prop="comment">
                  <ng-template ngx-datatable-cell-template let-row="row" let-value="value">
                    <input matInput [ngModelOptions]="{standalone: true}" [(ngModel)]="row.comment">
                  </ng-template>
                </ngx-datatable-column>
              </ngx-datatable>
            </div>
          </mat-expansion-panel>

        </mat-accordion>
      </div>
      <div style="padding-top:10px"></div>
      <div *ngIf="request.costs.subcontractorCosts.costs.length > 0" class="full-width" fxLayout="column" fxLayoutGap="4px">
        <div class="smaller-gray-text" fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="4px">
          <label>Subcontractor
          </label>

        </div>
        <mat-accordion displayMode="flat" multi class="mat-table cost-table">
          <section matSort class="mat-header-row">
            <span class="mat-header-cell">TYPE</span>
            <span class="mat-header-cell">DESCRIPTION</span>
            <span class="mat-header-cell">RECEIPT</span>
            <span class="mat-header-cell">SUBTOTAL</span>
            <span class="mat-header-cell">TOTAL</span>
          </section>
          <mat-expansion-panel *ngFor="let item of request.costs.subcontractorCosts.costs">
            <mat-expansion-panel-header class="mat-row">
              <span class="mat-cell ts-80">{{item.type}}</span>
              <span class="mat-cell ts-80">{{item.description | truncate:12}}</span>
              <span class="mat-cell ts-80">
                <a class="blue-link" *ngIf="item.receipt">receipt</a>
                <a class="blue-link" *ngIf="!item.receipt">Add Receipt</a>
              </span>
              <span class="mat-cell ts-80">{{item.subtotal | currency}}</span>
              <span class="mat-cell ts-80">{{item.total | currency}}</span>

            </mat-expansion-panel-header>
            <div fxLayout="row" fxLayoutGap="8px">
              <button mat-raised-button (click)="approveSubcontractor(item)">Approve</button>
              <button mat-button (click)="disputeSubcontractor(item)">Add Dispute</button>
            </div>
            <div class="m-t-12 full-width" *ngIf="item.disputes && item.disputes.length > 0" fxLayout="column" fxLayoutGap="10px">
              <ngx-datatable #mysubcontractortable class="material" [headerHeight]="50" [limit]="10" [columnMode]="'force'" [footerHeight]="50"
                [rowHeight]="'auto'" [rows]="item.disputes">
                <ngx-datatable-column name="DISPUTE TYPE" prop="type">
                  <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-value="value" let-row="row">
                    <mat-form-field>
                      <mat-select placeholder="Dispute Type" [ngModelOptions]="{standalone: true}" [(ngModel)]="row.type">
                        <mat-option *ngFor="let t of disputeTypes" [value]="t.value">
                          {{ t.viewValue }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                  </ng-template>
                </ngx-datatable-column>
                <ngx-datatable-column name="ISSUE" prop="issue">
                  <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-row="row" let-value="value">
                    <mat-form-field>
                      <mat-select placeholder="Issue" [ngModelOptions]="{standalone: true}" [(ngModel)]="row.issue">
                        <mat-option *ngFor="let t of issues" [value]="t.value">
                          {{ t.viewValue }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                  </ng-template>
                </ngx-datatable-column>
                <ngx-datatable-column name="DISPUTE REQUEST" prop="disputeRequest">
                  <ng-template ngx-datatable-cell-template let-row="row" let-value="value">
                    <mat-form-field>
                      <mat-select placeholder="Dispute Request" [ngModelOptions]="{standalone: true}" [(ngModel)]="row.disputeRequest">
                        <mat-option *ngFor="let t of requestDisputes" [value]="t.value">
                          {{ t.viewValue }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                  </ng-template>
                </ngx-datatable-column>
                <ngx-datatable-column name="AMOUNT" prop="amount">
                  <ng-template ngx-datatable-cell-template let-row="row" let-value="value">
                    <input matInput currencyMask [options]="{ align: 'left'}" [ngModelOptions]="{standalone: true}" [(ngModel)]="row.amount">
                  </ng-template>
                </ngx-datatable-column>
                <ngx-datatable-column name="COMMENT" prop="comment">
                  <ng-template ngx-datatable-cell-template let-row="row" let-value="value">
                    <input matInput [ngModelOptions]="{standalone: true}" [(ngModel)]="row.comment">
                  </ng-template>
                </ngx-datatable-column>
              </ngx-datatable>
            </div>
          </mat-expansion-panel>

        </mat-accordion>
      </div>
    </div>
    <div></div>
  </div>
</div>
