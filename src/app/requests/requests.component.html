<div class="line-items full-width hidden-md-up">
  <div *ngIf="!items || items.length=== 0" class="full-width">
    <h2 class="smaller-gray-text">Please add requests</h2>
  </div>
  <div *ngIf="items && items.length> 0" class="mt-3 full-width" [@listAnimation]="items.length">
    <div *ngFor="let item of items; let i= index;">
      <a (click)="viewRequest(item)" class="card clickable">
        <div class="card-header">
          <div class="d-flex flex-row align-items-center">
            <div class="col-8">
              <h5 class="m-0 bold">{{item.id}}</h5>
            </div>

          </div>
          <div class="d-flex flex-row
            align-items-center">
            <div class="col-8">
              <h6 class="m-0 bold" [ngClass]="{ 'red': item.overdue }">{{item.age}}
                days
              </h6>
            </div>
          </div>
        </div>
        <div class="card-block">

          <div class="card-text row flex-row">
            <div class="full-width">
              <div class="full-width row justify-content-around">
                <h5>
                  <span class="section-label">Start Date:</span>
                  {{item.startDate | date:'shortDate'}}
                </h5>
                <h5>
                  <span class="section-label">End Date:</span> {{item.endDate |
                  date:'shortDate'}}
                </h5>
              </div>
              <div class="full-width row justify-content-around">
                <h3>
                  {{item.total | currency}}
                </h3>
              </div>
            </div>

          </div>
        </div>
      </a>
    </div>


  </div>

</div>


<div class="line-items full-width hidden-sm-down">
  <div class="px-2 m-0">
    <div *ngIf="!items || items.length=== 0" class="full-width">
      <h2 class="smaller-gray-text">Please add requests</h2>
    </div>

    <div class="full-width request-list" *ngIf="items && items.length !== 0">
      <clr-datagrid>
        <clr-dg-column [clrDgField]="'oneUp'" [clrDgSortBy]="oneUpComparator">Request
          #
        </clr-dg-column>
        <clr-dg-column [clrDgField]="'startDate'">Start Date</clr-dg-column>
        <clr-dg-column [clrDgField]="'endDate'">Stop Date</clr-dg-column>
        <clr-dg-column [clrDgField]="'totalItems'"># Line Items</clr-dg-column>
        <clr-dg-column [clrDgField]="'total'">Total $ Amount</clr-dg-column>
        <clr-dg-column [clrDgField]="'age'">Age</clr-dg-column>
        <clr-dg-column [clrDgField]="'status'">Status</clr-dg-column>
        <clr-dg-column>Actions</clr-dg-column>
        <clr-dg-row *clrDgItems="let item of items; let i= index;trackBy:
          trackByFn">
          <clr-dg-cell (click)="viewRequest(item)">{{item.oneUp}}</clr-dg-cell>
          <clr-dg-cell (click)="viewRequest(item)">{{item.startDate |
            date:'shortDate'}}
          </clr-dg-cell>
          <clr-dg-cell (click)="viewRequest(item)">{{item.endDate |
            date:'shortDate'}}
          </clr-dg-cell>
          <clr-dg-cell (click)="viewRequest(item)">{{item.totalItems}}</clr-dg-cell>
          <clr-dg-cell (click)="viewRequest(item)">{{item.total | currency}}</clr-dg-cell>
          <clr-dg-cell (click)="viewRequest(item)">{{item.age}}&nbsp;days</clr-dg-cell>
          <clr-dg-cell (click)="viewRequest(item)">{{item.status}}</clr-dg-cell>
          <clr-dg-cell>
            <div class="row
              justify-content-end">
              <button *ngIf="submitRequests" class="ripple icon-button pr-1" matTooltip="Clone Request" (click)="clone(item)">
                <mat-icon color="primary" svgIcon="duplicate"></mat-icon>
              </button>
              <button *ngIf="submitRequests && item.isDraft()" class="button-padding ripple icon-button pr-1"
                matTooltip="Delete Request" (click)="removeRequest(i,item)">
                <mat-icon color="warn">delete</mat-icon>
              </button>
            </div>
          </clr-dg-cell>
        </clr-dg-row>
        <clr-dg-footer>{{items.length}} Items</clr-dg-footer>
      </clr-datagrid>
    </div>
  </div>
</div>

<clr-modal class="fadeDown in" [(clrModalOpen)]="_duplicateModal" [clrModalClosable]="false">
  <h3 class="modal-title">Request Duplicated!</h3>
  <div class="modal-body">
    <p *ngIf="duplicateSuccess">Would you like to go to the duplicated
      request?</p>

    <div *ngIf="!duplicateSuccess" class="progress loop"><progress></progress></div>
    <p *ngIf="duplicateError">An error occurred
      duplicating your request.<br />Please close and try again.</p>
  </div>
  <div class="modal-footer" *ngIf="duplicateSuccess">
    <button type="button" class="btn btn-outline-warning" (click)="stay()">No</button>
    <button type="button" class="btn btn-primary" (click)="viewDuplicatedRequest()">Yes</button>
  </div>
  <div class="modal-footer" *ngIf="!duplicateSuccess">
    <button type="button" class="btn btn-outline-warning" (click)="stay()">Cancel</button>
  </div>
</clr-modal>

<clr-modal class="fadeDown in" [(clrModalOpen)]="_confirmDeleteModal" [clrModalClosable]="false">
  <h3 class="modal-title">Confirm Delete</h3>
  <div class="modal-body">
    <p>Are you sure you want to delete this request?</p>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-outline-danger" (click)="cancelDelete()">Cancel</button>
    <button type="button" class="btn btn-danger" (click)="confirmDelete()">Delete</button>
  </div>
</clr-modal>
